<!doctype html>
<html lang="en" ng-app="todomvc" scroll data-framework="firebase" ng-controller="pollCtrl">
<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- http://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers -->
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />

	<title>Question Room: {{roomId}}</title>

	<!-- UI CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
	
	
	<!-- Font CSS -->
	<link href="css/font-awesome.min.css" rel="stylesheet" media="screen">
	<link href='https://fonts.googleapis.com/css?family=Crete+Round:400,400italic|Inconsolata' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="fonts/font-awesome-4.4.0/css/font-awesome.min.css">
	
	<!-- need this for comlted ones. TODO: can I do this in bootstrap -->
	<link rel="stylesheet" href="css/main.css">
	
	<!-- Custom styles CSS -->
	
	
	
	
</head>
<body>

		
 <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Questions Room: <tt>{{roomId}}</tt></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-left">
            <li><a ng-href="question.html#/{{roomId}}">Question</a></li>
            <li class=active><a href="">Polling<span class="badge" style="background-color: red;">{{polls.length}}</span></a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">Home</a></li>
            <li><a href="" ng-hide="$authData"   ng-click="FBLogin()" >Login</a></li>
            <li><a href="" ng-show="$authData"   ng-click="FBLogout()">Logout</a></li>
			<li><img ng-show="$authData" src="https://graph.facebook.com/{{$authData.facebook.id}}/picture/?type=square&return_ssl_resources=1" alt="{{name}}" />
			{{$authData.facebook.displayName}}</li>

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
	
	<!-- Raise a poll -->
	 <div class="container">
        <div class="form-group">
            <form id="poll-form" ng-submit="addPoll()">
                <h2>Raise a Poll</h2>
                    <div class="form-group-title">
                        <label>Title </label>
                            <input type="text" class="form-control" ng-model="head" ng-minlength="3" maxlength="1024" placeholder="Enter Your Poll Title" required="input.head"></input>	
                    </div>
                    <div class="form-group-content">
                        <label>Number of Choices
                        <select id="numberOfChoice" ng-model="numOfChoice" ng-options="choice as choice for choice in choices">
                        </select>
                        </label>
                        <label>Options</label>
                        <div ng-repeat="x in getOptions(numOfChoice) track by $index"><label>{{$index + 1}}. <input ng-model="options[$index]" ng-minlength="3" maxlength="1024" required></input></label></div>
                    </div>
                    <div class = "form-group-btn">
                        <button class="btn btn-submit" type="submit">Raise</button>
                        <span ng-show="!postable" class="alert alert-danger" role="alert">Title/Options must have more than 3 characters!</span>
                    </div>
            </form>
        </div>
    </div>

    <div class="container"> <!-- Poll listing -->
    <h3>Poll List</h3>
    <!-- For non-xs device -->
    <div class="hidden-xs col-sm-6 col-md-6">
    <div ng-repeat="poll in polls | pollFilter: polls.length" class="list-group">
        <span class="label label-danger" ng-show="poll.latest">New</span><span class="title">{{poll.head}}</span>
        <div ng-repeat="item in poll.items | pollListFilter: 0">
        <button class="btn btn-default" ng-click="addVote($index)" ng-disabled="$storage[poll.$id].voted">Vote for {{$index + 1}}:</button>&nbsp;<span>{{item.option}}</span> <br /> Votes:<div class="progress"><span class="progress-bar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" role="progressbar" style="width: {{item.vote/poll.totalVote*100}}%; min-width: 1em;"><span>{{item.vote}}</span></span></div>
        </div>
        <tt>posted: <span am-time-ago="poll.timestamp"></span> </tt>
        <hr>
    </div>
    </div>
	
    <div class="hidden-xs col-sm-6 col-md-6">

    <div ng-repeat="poll in polls | pollFilter: polls.length" class="list-group">
        <span class="label label-danger" ng-show="poll.latest"></span><span class="title invisible">&nbsp;</span>
        <div ng-repeat="item in poll.items | pollListFilter: 1" ng-init="rightBegin = (poll.items.length/2 | number : 0)*1">
        <button class="btn btn-default" ng-click="addVote($index)" ng-disabled="$storage[poll.$id].voted">Vote for {{rightBegin + $index + 1}}:</button>&nbsp;<span>{{item.option}}</span> <br /> Votes:<div class="progress"><span class="progress-bar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" role="progressbar" style="width: {{item.vote/poll.totalVote*100}}%; min-width: 1em;"><span>{{item.vote}}</span></span></div>
        </div>
        <tt class="invisible">posted: </tt>
        <hr>
    </div>
    </div>
	
    <!-- For xs-device (smartphone) -->
    <div class="visible-xs-12 hidden-sm hidden-md hidden-lg">
    <div ng-repeat="poll in polls | pollFilter: polls.length" class="list-group">
        <span class="label label-danger" ng-show="poll.latest">New</span><span class="title">{{poll.head}}</span>
        <div ng-repeat="item in poll.items">
        <button class="btn btn-default" ng-click="addVote($index)" ng-disabled="$storage[poll.$id].voted">Vote for {{$index + 1}}:</button>&nbsp;<span>{{item.option}}</span> <br /> Votes:<div class="progress"><span class="progress-bar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" role="progressbar" style="width: {{item.vote/poll.totalVote*100}}%; min-width: 1em;"><span>{{item.vote}}</span></span></div>
        </div>
        <tt>posted: <span am-time-ago="poll.timestamp"></span> </tt>
        <hr>
    </div>
    </div>
    </div>
	
	
	
	<!-- Scroll to top -->

	<div class="scroll-up">
		<a href="#top"><i class="fa fa-angle-up"></i></a>
	</div>
    
    <!-- Scroll to top end-->



<!-- Autolink from https://github.com/gregjacobs/Autolinker.js> -->
<script src="js/lib/Autolinker.min.js"></script>

<!-- 2.2.2 -->
<script src="js/lib/jquery.min.js"></script>
<script src="js/lib/firebase.js"></script>
<script src="js/lib/angular.min.js"></script>
<script src="js/lib/angularfire.js"></script>
<script src="js/lib/angular-sanitize.min.js"></script>

<!-- AngularMoment-->
<script src="js/lib/moment.js"></script>
<script src="js/lib/angular-moment.min.js"></script>

<!-- Ng storage 0.3.6  -->
<script src="js/lib/ngStorage.min.js"></script>


<!-- Javascript files -->
<script src="js/app.js"></script>
<script src="js/filters/pollFilter.js"></script>
<script src="js/controllers/pollCtrl.js"></script>
<script src="js/directives/todoFocus.js"></script>
<script src="js/directives/todoBlur.js"></script>
<script src="js/directives/todoEscape.js"></script>

<script src="js/lib/bootstrap.min.js"></script>


<!-- Javascript files .Font -->
<script src="http://use.edgefonts.net/source-sans-pro.js"></script> 

<script>
$('a[href*=top]').bind("click", function(e){
			$('html, body').stop().animate({
				scrollTop: 0
				}, 1000);
				e.preventDefault();
			});

			$(window).scroll(function() {
				if ($(this).scrollTop() > 100) {
					$('.scroll-up').fadeIn();
				} else {
					$('.scroll-up').fadeOut();
				}
			});
</script>

</body>
</html>
